{% extends "base.html" %}

{% block title %}Todos - {{ user }}{% endblock %}

{% block content %}
    <h1>Your Todos</h1>
    
    {% if not user_subscribed %}
        <div style="padding: 20px; background-color: #fff3cd; border: 1px solid #ffc107; border-radius: 4px; margin-bottom: 20px;">
            <h3>Subscription Required</h3>
            <p>You need a subscription to create and manage todos. <a href="/subscribe">Subscribe now</a> to unlock todo functionality!</p>
        </div>
    {% else %}
        <form method="post" action="/todos" style="margin-bottom: 20px;">
            <input type="text" name="todo" placeholder="Enter new todo" required style="padding: 8px; width: 300px; margin-right: 10px;">
            <button type="submit" style="padding: 8px 16px; background-color: #28a745; color: white; border: none; border-radius: 4px;">Add Todo</button>
        </form>
        
        {% if todos %}
            <h2>Your Todos:</h2>
            <ul style="list-style: none; padding: 0;">
            {% for todo in todos %}
                <li style="margin-bottom: 10px; padding: 10px; background-color: #f8f9fa; border-radius: 4px; display: flex; align-items: center;">
                    <form method="post" action="/todos/{{ loop.index0 }}/toggle" style="display: inline; margin-right: 10px;">
                        <button type="submit" style="background: none; border: none; font-size: 1.2em; cursor: pointer;">
                            {{ "✅" if todo.done else "⭕" }}
                        </button>
                    </form>
                    <span {% if todo.done %}style="text-decoration: line-through; color: #6c757d;"{% endif %}>
                        {{ todo.text }}
                    </span>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p style="color: #6c757d; font-style: italic;">No todos yet. Add one above!</p>
        {% endif %}
    {% endif %}
{% endblock %} 